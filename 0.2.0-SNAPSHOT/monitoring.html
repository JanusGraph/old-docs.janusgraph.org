<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;35.&nbsp;Monitoring JanusGraph</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="JanusGraph Documentation"><link rel="up" href="advanced.html" title="Part&nbsp;V.&nbsp;Advanced Topics"><link rel="prev" href="hadoop-tp3.html" title="Chapter&nbsp;34.&nbsp;JanusGraph with TinkerPop&#8217;s Hadoop-Gremlin"><link rel="next" href="internals.html" title="Part&nbsp;VI.&nbsp;JanusGraph Internals"><script xmlns:d="http://docbook.org/ns/docbook" type="text/javascript" src="js/jquery/jquery-1.11.0.js"></script><script xmlns:d="http://docbook.org/ns/docbook" type="text/javascript" src="js/jquery/jquery-migrate-1.2.1.min.js"></script><link xmlns:d="http://docbook.org/ns/docbook" rel="stylesheet" id="inline-blob-janusgraph-docs-specific" href="css/docs.css" type="text/css" media="all"><link xmlns:d="http://docbook.org/ns/docbook" rel="apple-touch-icon" type="image/png" href="images/janusgraph-logomark.png"><script xmlns:d="http://docbook.org/ns/docbook" type="text/javascript">
      WebFontConfig = {
        google: {
          families: [
            "Lato:400,400italic,700,700italic:latin,greek-ext,cyrillic,latin-ext,greek,cyrillic-ext,vietnamese",
            "Open+Sans:400,400italic,700,700italic:latin,greek-ext,cyrillic,latin-ext,greek,cyrillic-ext,vietnamese",
            "Antic+Slab:400,400italic,700,700italic:latin,greek-ext,cyrillic,latin-ext,greek,cyrillic-ext,vietnamese"
          ]
        }
      };
      (function() {
      var wf = document.createElement('script');
      wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
        '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
	wf.type = 'text/javascript';
	wf.async = 'true';
	var s = document.getElementsByTagName('script')[0];
	s.parentNode.insertBefore(wf, s);
	})();
    </script></head><body xmlns:d="http://docbook.org/ns/docbook" bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div id="wrapper"><div class="header-wrapper"><header id="header"><ul class="header-list"><li class="header-item"><a href="http://janusgraph.org"><img src="images/janusgraph-logo.png" alt="JanusGraph" class="normal_logo"></a></li><li class="header-item-right"><a href="https://github.com/JanusGraph/janusgraph/releases">Download JanusGraph</a></li><li class="header-item-right"><a href="https://github.com/JanusGraph/janusgraph/releases">Other Versions</a></li><li class="header-item-right"><a href="index.html">Documentation (0.2.0-SNAPSHOT)</a></li></ul></header></div><div id="main" class="clearfix width-100"><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">JanusGraph Documentation</a></span> &gt; <span class="breadcrumb-link"><a href="advanced.html">Advanced Topics</a></span> &gt; <span class="breadcrumb-node">Monitoring JanusGraph</span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="monitoring"></a>Chapter&nbsp;35.&nbsp;Monitoring JanusGraph</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="monitoring.html#_metrics_in_janusgraph">35.1. Metrics in JanusGraph</a></span></dt><dd><dl><dt><span class="section"><a href="monitoring.html#_configuring_metrics_collection">35.1.1. Configuring Metrics Collection</a></span></dt></dl></dd><dt><span class="section"><a href="monitoring.html#metrics-reporters">35.2. Configuring Metrics Reporting</a></span></dt><dd><dl><dt><span class="section"><a href="monitoring.html#metrics-console">35.2.1. Console Reporter</a></span></dt><dt><span class="section"><a href="monitoring.html#metrics-csv">35.2.2. CSV File Reporter</a></span></dt><dt><span class="section"><a href="monitoring.html#metrics-ganglia">35.2.3. Ganglia Reporter</a></span></dt><dt><span class="section"><a href="monitoring.html#metrics-graphite">35.2.4. Graphite Reporter</a></span></dt><dt><span class="section"><a href="monitoring.html#metrics-jmx">35.2.5. JMX Reporter</a></span></dt><dt><span class="section"><a href="monitoring.html#metrics-slf4j">35.2.6. Slf4j Reporter</a></span></dt><dt><span class="section"><a href="monitoring.html#metrics-custom">35.2.7. User-Provided/Custom Reporter</a></span></dt></dl></dd></dl></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_metrics_in_janusgraph"></a>35.1.&nbsp;Metrics in JanusGraph</h2></div></div></div><p>JanusGraph supports <a class="link" href="http://metrics.codahale.com/" target="_top">Metrics</a>.  JanusGraph can measure the following:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">The number of transactions begun, comitted, and rolled back</li><li class="listitem">The number of attempts and failures of each storage backend operation type</li><li class="listitem">The response time distribution of each storage backend operation type</li></ul></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_configuring_metrics_collection"></a>35.1.1.&nbsp;Configuring Metrics Collection</h3></div></div></div><p>To enable Metrics collection, set the following in JanusGraph&#8217;s properties file:</p><pre class="programlisting"><em class="hl-comment"># Required to enable Metrics in JanusGraph</em>
<span class="hl-attribute">metrics.enabled </span>= true</pre><p>This setting makes JanusGraph record measurements at runtime using Metrics classes like Timer, Counter, Histogram, etc.  To access these measurements, one or more Metrics reporters must be configured as described in the section <a class="xref" href="monitoring.html#metrics-reporters" title="35.2.&nbsp;Configuring Metrics Reporting">Section&nbsp;35.2, &#8220;Configuring Metrics Reporting&#8221;</a>.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_customizing_the_default_metric_names"></a>35.1.1.1.&nbsp;Customizing the Default Metric Names</h4></div></div></div><p>JanusGraph prefixes all metric names with "org.janusgraph" by default.  This prefix can be set through the <code class="literal">metrics.prefix</code> configuration property.  For example, to shorten the default "org.janusgraph" prefix to just "janusgraph":</p><pre class="programlisting"><em class="hl-comment"># Optional</em>
<span class="hl-attribute">metrics.prefix </span>= janusgraph</pre></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_transaction_specific_metrics_names"></a>35.1.1.2.&nbsp;Transaction-Specific Metrics Names</h4></div></div></div><p>Each JanusGraph transaction may optionally specify its own Metrics name prefix, overridding both the default Metrics name prefix and the <code class="literal">metrics.prefix</code> configuration property.  For example, the prefix could be changed to the name of the frontend application that opened the JanusGraph transaction.  Note that Metrics maintains a ConcurrentHashMap of metric names and their associated objects in memory, so it&#8217;s probably a good idea to keep the number of distinct metric prefixes small.</p><p>To do this, call <code class="literal">TransactionBuilder.setMetricsPrefix(String)</code>:</p><pre class="programlisting">JanusGraph graph = ...;
TransactionBuilder tbuilder = graph.buildTransaction();
JanusGraphTransaction tx = tbuilder.groupName(<span class="hl-string">"foobar"</span>).start();</pre></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_separating_metrics_by_backend_store"></a>35.1.1.3.&nbsp;Separating Metrics by Backend Store</h4></div></div></div><p>JanusGraph combines the Metrics for its various internal storage backend handles by default.  All Metrics for storage backend interactions follow the pattern "&lt;prefix&gt;.stores.&lt;opname&gt;", regardless of whether they come from the ID store, edge store, etc.  When <code class="literal">metrics.merge-basic-metrics = false</code> is set in JanusGraph&#8217;s properties file, the "stores" string in metric names is replaced by "idStore", "edgeStore", "vertexIndexStore", or "edgeIndexStore".</p></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="metrics-reporters"></a>35.2.&nbsp;Configuring Metrics Reporting</h2></div></div></div><p>JanusGraph supports the following Metrics reporters:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="monitoring.html#metrics-console" title="35.2.1.&nbsp;Console Reporter">Console</a></li><li class="listitem"><a class="link" href="monitoring.html#metrics-csv" title="35.2.2.&nbsp;CSV File Reporter">CSV</a></li><li class="listitem"><a class="link" href="monitoring.html#metrics-ganglia" title="35.2.3.&nbsp;Ganglia Reporter">Ganglia</a></li><li class="listitem"><a class="link" href="monitoring.html#metrics-graphite" title="35.2.4.&nbsp;Graphite Reporter">Graphite</a></li><li class="listitem"><a class="link" href="monitoring.html#metrics-jmx" title="35.2.5.&nbsp;JMX Reporter">JMX</a></li><li class="listitem"><a class="link" href="monitoring.html#metrics-slf4j" title="35.2.6.&nbsp;Slf4j Reporter">Slf4j</a></li><li class="listitem"><a class="link" href="monitoring.html#metrics-custom" title="35.2.7.&nbsp;User-Provided/Custom Reporter">User-provided/Custom</a></li></ul></div><p>Each reporter type is independent of and can coexist with the others.  For example, it&#8217;s possible to configure Ganglia, JMX, and Slf4j Metrics reporters to operate simultaneously.  Just set all their respective configuration keys in janusgraph.properties (and enable metrics as directed above).</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="metrics-console"></a>35.2.1.&nbsp;Console Reporter</h3></div></div></div><div class="table"><a name="d0e10745"></a><p class="title"><b>Table&nbsp;35.1.&nbsp;Metrics Console Reporter Configuration Options</b></p><div class="table-contents"><table summary="Metrics Console Reporter Configuration Options" cellpadding="4px" style="border-collapse: collapse;border-top: 1px solid #1b8669; border-bottom: 1px solid #1b8669; border-left: 1px solid #1b8669; border-right: 1px solid #1b8669; "><colgroup><col class="col_1"><col class="col_2"><col class="col_3"><col class="col_4"></colgroup><thead><tr><th style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top">Config Key</th><th style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top">Required?</th><th style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top">Value</th><th style="border-bottom: 1px solid #747474; " align="left" valign="top">Default</th></tr></thead><tbody><tr><td style="border-right: 1px solid #747474; " align="left" valign="top"><p>metrics.console.interval</p></td><td style="border-right: 1px solid #747474; " align="left" valign="top"><p>yes</p></td><td style="border-right: 1px solid #747474; " align="left" valign="top"><p>Milliseconds to wait between dumping metrics to the console</p></td><td style="" align="left" valign="top"><p>null</p></td></tr></tbody></table></div></div><br class="table-break"><p>Example janusgraph.properties snippet that prints metrics to the console once a minute:</p><pre class="programlisting"><span class="hl-attribute">metrics.enabled </span>= true
<em class="hl-comment"># Required; specify logging interval in milliseconds</em>
<span class="hl-attribute">metrics.console.interval </span>= 60000</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="metrics-csv"></a>35.2.2.&nbsp;CSV File Reporter</h3></div></div></div><div class="table"><a name="d0e10784"></a><p class="title"><b>Table&nbsp;35.2.&nbsp;Metrics CSV Reporter Configuration Options</b></p><div class="table-contents"><table summary="Metrics CSV Reporter Configuration Options" cellpadding="4px" style="border-collapse: collapse;border-top: 1px solid #1b8669; border-bottom: 1px solid #1b8669; border-left: 1px solid #1b8669; border-right: 1px solid #1b8669; "><colgroup><col class="col_1"><col class="col_2"><col class="col_3"><col class="col_4"></colgroup><thead><tr><th style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top">Config Key</th><th style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top">Required?</th><th style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top">Value</th><th style="border-bottom: 1px solid #747474; " align="left" valign="top">Default</th></tr></thead><tbody><tr><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>metrics.csv.interval</p></td><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>yes</p></td><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>Milliseconds to wait between writing CSV lines</p></td><td style="border-bottom: 1px solid #747474; " align="left" valign="top"><p>null</p></td></tr><tr><td style="border-right: 1px solid #747474; " align="left" valign="top"><p>metrics.csv.dir</p></td><td style="border-right: 1px solid #747474; " align="left" valign="top"><p>yes</p></td><td style="border-right: 1px solid #747474; " align="left" valign="top"><p>Directory in which CSV files are written (will be created if it does not exist)</p></td><td style="" align="left" valign="top"><p>null</p></td></tr></tbody></table></div></div><br class="table-break"><p>Example janusgraph.properties snippet that writes CSV files once a minute to the directory <code class="literal">./foo/bar/</code> (relative to the process&#8217;s working directory):</p><pre class="programlisting"><span class="hl-attribute">metrics.enabled </span>= true
<em class="hl-comment"># Required; specify logging interval in milliseconds</em>
<span class="hl-attribute">metrics.csv.interval </span>= 60000
<span class="hl-attribute">metrics.csv.dir </span>= foo/bar</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="metrics-ganglia"></a>35.2.3.&nbsp;Ganglia Reporter</h3></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>Configuration of <a class="link" href="http://ganglia.sourceforge.net/" target="_top">Ganglia</a> requires an additional library that is not packaged with JanusGraph due to its LGPL licensing that conflicts with the JanusGraph&#8217;s Apache 2.0 License.  To run with Ganglia monitoring, download the <code class="literal">org.acplt:oncrpc</code> jar from <a class="link" href="http://repo1.maven.org/maven2/org/acplt/oncrpc/1.0.7/" target="_top">here</a> and copy it to the JanusGraph <code class="literal">/lib</code> directory before starting the server.</p></td></tr></table></div><div class="table"><a name="d0e10854"></a><p class="title"><b>Table&nbsp;35.3.&nbsp;Metrics Ganglia Reporter Configuration Options</b></p><div class="table-contents"><table summary="Metrics Ganglia Reporter Configuration Options" cellpadding="4px" style="border-collapse: collapse;border-top: 1px solid #1b8669; border-bottom: 1px solid #1b8669; border-left: 1px solid #1b8669; border-right: 1px solid #1b8669; "><colgroup><col class="col_1"><col class="col_2"><col class="col_3"><col class="col_4"></colgroup><thead><tr><th style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top">Config Key</th><th style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top">Required?</th><th style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top">Value</th><th style="border-bottom: 1px solid #747474; " align="left" valign="top">Default</th></tr></thead><tbody><tr><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>metrics.ganglia.hostname</p></td><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>yes</p></td><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>Unicast host or multicast group to which our Metrics are sent</p></td><td style="border-bottom: 1px solid #747474; " align="left" valign="top"><p>null</p></td></tr><tr><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>metrics.ganglia.interval</p></td><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>yes</p></td><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>Milliseconds to wait between sending datagrams</p></td><td style="border-bottom: 1px solid #747474; " align="left" valign="top"><p>null</p></td></tr><tr><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>metrics.ganglia.port</p></td><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>no</p></td><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>UDP port to which we send Metrics datagrams</p></td><td style="border-bottom: 1px solid #747474; " align="left" valign="top"><p>8649</p></td></tr><tr><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>metrics.ganglia.addressing-mode</p></td><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>no</p></td><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>Must be "unicast" or "multicast"</p></td><td style="border-bottom: 1px solid #747474; " align="left" valign="top"><p>unicast</p></td></tr><tr><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>metrics.ganglia.ttl</p></td><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>no</p></td><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>Multicast datagram TTL; ignore for unicast</p></td><td style="border-bottom: 1px solid #747474; " align="left" valign="top"><p>1</p></td></tr><tr><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>metrics.ganglia.protocol-31</p></td><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>no</p></td><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>Boolean; true to use Ganglia protocol 3.1, false to use 3.0</p></td><td style="border-bottom: 1px solid #747474; " align="left" valign="top"><p>true</p></td></tr><tr><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>metrics.ganglia.uuid</p></td><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>no</p></td><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p><a class="link" href="https://github.com/ganglia/monitor-core/wiki/UUIDSources" target="_top">Host UUID to report instead of IP:hostname</a></p></td><td style="border-bottom: 1px solid #747474; " align="left" valign="top"><p>null</p></td></tr><tr><td style="border-right: 1px solid #747474; " align="left" valign="top"><p>metrics.ganglia.spoof</p></td><td style="border-right: 1px solid #747474; " align="left" valign="top"><p>no</p></td><td style="border-right: 1px solid #747474; " align="left" valign="top"><p><a class="link" href="http://sourceforge.net/apps/trac/ganglia/wiki/gmetric_spoofing" target="_top">Override IP:hostname reported to Ganglia</a></p></td><td style="" align="left" valign="top"><p>null</p></td></tr></tbody></table></div></div><br class="table-break"><p>Example janusgraph.properties snippet that sends unicast UDP datagrams to localhost on the default port once every 30 seconds:</p><pre class="programlisting"><span class="hl-attribute">metrics.enabled </span>= true
<em class="hl-comment"># Required; IP or hostname string</em>
<span class="hl-attribute">metrics.ganglia.hostname </span>= 127.0.0.1
<em class="hl-comment"># Required; specify logging interval in milliseconds</em>
<span class="hl-attribute">metrics.ganglia.interval </span>= 30000</pre><p>Example janusgraph.properties snippet that sends unicast UDP datagrams to a non-default destination port and which also spoofs the IP and hostname reported to Ganglia:</p><pre class="programlisting"><span class="hl-attribute">metrics.enabled </span>= true
<em class="hl-comment"># Required; IP or hostname string</em>
<span class="hl-attribute">metrics.ganglia.hostname </span>= 1.2.3.4
<em class="hl-comment"># Required; specify logging interval in milliseconds</em>
<span class="hl-attribute">metrics.ganglia.interval </span>= 60000
<em class="hl-comment"># Optional</em>
<span class="hl-attribute">metrics.ganglia.port </span>= 6789
<span class="hl-attribute">metrics.ganglia.spoof = 10.0.0.1</span>:zombo.com</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="metrics-graphite"></a>35.2.4.&nbsp;Graphite Reporter</h3></div></div></div><div class="table"><a name="d0e10990"></a><p class="title"><b>Table&nbsp;35.4.&nbsp;Metrics Graphite Reporter Configuration Options</b></p><div class="table-contents"><table summary="Metrics Graphite Reporter Configuration Options" cellpadding="4px" style="border-collapse: collapse;border-top: 1px solid #1b8669; border-bottom: 1px solid #1b8669; border-left: 1px solid #1b8669; border-right: 1px solid #1b8669; "><colgroup><col class="col_1"><col class="col_2"><col class="col_3"><col class="col_4"></colgroup><thead><tr><th style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top">Config Key</th><th style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top">Required?</th><th style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top">Value</th><th style="border-bottom: 1px solid #747474; " align="left" valign="top">Default</th></tr></thead><tbody><tr><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>metrics.graphite.hostname</p></td><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>yes</p></td><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>IP address or hostname to which <a class="link" href="https://graphite.readthedocs.org/en/latest/feeding-carbon.html#the-plaintext-protocol" target="_top">Graphite plaintext protocol</a> data are sent</p></td><td style="border-bottom: 1px solid #747474; " align="left" valign="top"><p>null</p></td></tr><tr><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>metrics.graphite.interval</p></td><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>yes</p></td><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>Milliseconds to wait between pushing data to Graphite</p></td><td style="border-bottom: 1px solid #747474; " align="left" valign="top"><p>null</p></td></tr><tr><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>metrics.graphite.port</p></td><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>no</p></td><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>Port to which Graphite plaintext protocol reports are sent</p></td><td style="border-bottom: 1px solid #747474; " align="left" valign="top"><p>2003</p></td></tr><tr><td style="border-right: 1px solid #747474; " align="left" valign="top"><p>metrics.graphite.prefix</p></td><td style="border-right: 1px solid #747474; " align="left" valign="top"><p>no</p></td><td style="border-right: 1px solid #747474; " align="left" valign="top"><p>Arbitrary string prepended to all metric names sent to Graphite</p></td><td style="" align="left" valign="top"><p>null</p></td></tr></tbody></table></div></div><br class="table-break"><p>Example janusgraph.properties snippet that sends metrics to a Graphite server on 192.168.0.1 every minute:</p><pre class="programlisting"><span class="hl-attribute">metrics.enabled </span>= true
<em class="hl-comment"># Required; IP or hostname string</em>
<span class="hl-attribute">metrics.graphite.hostname </span>= 192.168.0.1
<em class="hl-comment"># Required; specify logging interval in milliseconds</em>
<span class="hl-attribute">metrics.graphite.interval </span>= 60000</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="metrics-jmx"></a>35.2.5.&nbsp;JMX Reporter</h3></div></div></div><div class="table"><a name="d0e11071"></a><p class="title"><b>Table&nbsp;35.5.&nbsp;Metrics JMX Reporter Configuration Options</b></p><div class="table-contents"><table summary="Metrics JMX Reporter Configuration Options" cellpadding="4px" style="border-collapse: collapse;border-top: 1px solid #1b8669; border-bottom: 1px solid #1b8669; border-left: 1px solid #1b8669; border-right: 1px solid #1b8669; "><colgroup><col class="col_1"><col class="col_2"><col class="col_3"><col class="col_4"></colgroup><thead><tr><th style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top">Config Key</th><th style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top">Required?</th><th style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top">Value</th><th style="border-bottom: 1px solid #747474; " align="left" valign="top">Default</th></tr></thead><tbody><tr><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>metrics.jmx.enabled</p></td><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>yes</p></td><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>Boolean</p></td><td style="border-bottom: 1px solid #747474; " align="left" valign="top"><p>false</p></td></tr><tr><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>metrics.jmx.domain</p></td><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>no</p></td><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>Metrics will appear in this JMX domain</p></td><td style="border-bottom: 1px solid #747474; " align="left" valign="top"><p>Metrics&#8217;s own default</p></td></tr><tr><td style="border-right: 1px solid #747474; " align="left" valign="top"><p>metrics.jmx.agentid</p></td><td style="border-right: 1px solid #747474; " align="left" valign="top"><p>no</p></td><td style="border-right: 1px solid #747474; " align="left" valign="top"><p>Metrics will be reported with this JMX agent ID</p></td><td style="" align="left" valign="top"><p>Metrics&#8217;s own default</p></td></tr></tbody></table></div></div><br class="table-break"><p>Example janusgraph.properties snippet:</p><pre class="programlisting"><span class="hl-attribute">metrics.enabled </span>= true
<em class="hl-comment"># Required</em>
<span class="hl-attribute">metrics.jmx.enabled </span>= true
<em class="hl-comment"># Optional; if omitted, then Metrics uses its default values</em>
<span class="hl-attribute">metrics.jmx.domain </span>= foo
<span class="hl-attribute">metrics.jmx.agentid </span>= baz</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="metrics-slf4j"></a>35.2.6.&nbsp;Slf4j Reporter</h3></div></div></div><div class="table"><a name="d0e11136"></a><p class="title"><b>Table&nbsp;35.6.&nbsp;Metrics Slf4j Reporter Configuration Options</b></p><div class="table-contents"><table summary="Metrics Slf4j Reporter Configuration Options" cellpadding="4px" style="border-collapse: collapse;border-top: 1px solid #1b8669; border-bottom: 1px solid #1b8669; border-left: 1px solid #1b8669; border-right: 1px solid #1b8669; "><colgroup><col class="col_1"><col class="col_2"><col class="col_3"><col class="col_4"></colgroup><thead><tr><th style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top">Config Key</th><th style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top">Required?</th><th style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top">Value</th><th style="border-bottom: 1px solid #747474; " align="left" valign="top">Default</th></tr></thead><tbody><tr><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>metrics.slf4j.interval</p></td><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>yes</p></td><td style="border-right: 1px solid #747474; border-bottom: 1px solid #747474; " align="left" valign="top"><p>Milliseconds to wait between dumping metrics to the logger</p></td><td style="border-bottom: 1px solid #747474; " align="left" valign="top"><p>null</p></td></tr><tr><td style="border-right: 1px solid #747474; " align="left" valign="top"><p>metrics.slf4j.logger</p></td><td style="border-right: 1px solid #747474; " align="left" valign="top"><p>no</p></td><td style="border-right: 1px solid #747474; " align="left" valign="top"><p>Slf4j logger name to use</p></td><td style="" align="left" valign="top"><p>"metrics"</p></td></tr></tbody></table></div></div><br class="table-break"><p>Example janusgraph.properties snippet that logs metrics once a minute to the logger named <code class="literal">foo</code>:</p><pre class="programlisting"><span class="hl-attribute">metrics.enabled </span>= true
<em class="hl-comment"># Required; specify logging interval in milliseconds</em>
<span class="hl-attribute">metrics.slf4j.interval </span>= 60000
<em class="hl-comment"># Optional; uses Metrics default when unset</em>
<span class="hl-attribute">metrics.slf4j.logger </span>= foo</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="metrics-custom"></a>35.2.7.&nbsp;User-Provided/Custom Reporter</h3></div></div></div><p>In case the Metrics reporter configuration options listed above are insufficient, JanusGraph provides a utility method to access the single <code class="literal">MetricRegistry</code> instance which holds all of its measurements.</p><pre class="programlisting">com.codahale.metrics.MetricRegistry janusgraphRegistry =
    org.janusgraph.util.stats.MetricManager.INSTANCE.getRegistry();</pre><p>Code that accesses <code class="literal">janusgraphRegistry</code> this way can then attach non-standard reporter types or standard reporter types with exotic configurations to <code class="literal">janusgraphRegistry</code>.  This approach is also useful if the surrounding application already has a framework for Metrics reporter configuration, or if the application needs multiple differently-configured instances of one of JanusGraph&#8217;s supported reporter types.  For instance, one could use this approach to setup multiple unicast Graphite reporters whereas JanusGraph&#8217;s properties configuration is limited to just one Graphite reporter.</p></div></div></div></div><div class="clearer"></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="hadoop-tp3.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="advanced.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="internals.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;34.&nbsp;JanusGraph with TinkerPop&#8217;s Hadoop-Gremlin&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Part&nbsp;VI.&nbsp;JanusGraph Internals</td></tr></table></div><div class="footer-wrapper"><footer id="footer"><div class="copyright">
              Copyright &copy; 2017 JanusGraph Authors. All rights reserved.<br>
              The Linux Foundation has registered trademarks and uses trademarks. For a list of<br>
              trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage">Trademark Usage</a> page.<br>
              Cassandra, Groovy, HBase, Hadoop, Lucene, Solr, and TinkerPop are trademarks of the Apache Software Foundation.<br>
              Berkeley DB and Berkeley DB Java Edition are trademarks of Oracle.<br>
              Documentation generated with <a href="http://www.methods.co.nz/asciidoc/">AsciiDoc</a>, <a href="http://asciidoctor.org/">AsciiDoctor</a>, <a href="http://docbook.sourceforge.net/">DocBook</a>, and <a href="http://saxon.sourceforge.net/">Saxon</a>.
        	  </div></footer></div></div></body></html>