<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;32.&nbsp;JanusGraph with TinkerPop&#8217;s Hadoop-Gremlin</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="JanusGraph Documentation"><link rel="up" href="advanced.html" title="Part&nbsp;V.&nbsp;Advanced Topics"><link rel="prev" href="serializer.html" title="Chapter&nbsp;31.&nbsp;Datatype and Attribute Serializer Configuration"><link rel="next" href="internals.html" title="Part&nbsp;VI.&nbsp;JanusGraph Internals"><script xmlns:d="http://docbook.org/ns/docbook" type="text/javascript" src="js/jquery/jquery-1.11.0.js"></script><script xmlns:d="http://docbook.org/ns/docbook" type="text/javascript" src="js/jquery/jquery-migrate-1.2.1.min.js"></script><link xmlns:d="http://docbook.org/ns/docbook" rel="stylesheet" id="style-css-css" href="avada-stub/style.css" type="text/css" media="all"><link xmlns:d="http://docbook.org/ns/docbook" rel="stylesheet" id="media-css-css" href="avada-stub/css/media.css" type="text/css" media="all"><link xmlns:d="http://docbook.org/ns/docbook" rel="stylesheet" id="animate-css-css" href="avada-stub/css/animate-custom.css" type="text/css" media="all"><link xmlns:d="http://docbook.org/ns/docbook" rel="stylesheet" id="inline-blob-from-avada-prototype" href="avada-stub/css/inlineblob.css" type="text/css" media="all"><link xmlns:d="http://docbook.org/ns/docbook" rel="stylesheet" id="inline-blob-from-avada-prototype-janusgraph-docs-specific" href="css/docs.css" type="text/css" media="all"><script xmlns:d="http://docbook.org/ns/docbook" type="text/javascript">
      WebFontConfig = {
        google: {
          families: [
            "Lato:400,400italic,700,700italic:latin,greek-ext,cyrillic,latin-ext,greek,cyrillic-ext,vietnamese",
            "Open+Sans:400,400italic,700,700italic:latin,greek-ext,cyrillic,latin-ext,greek,cyrillic-ext,vietnamese",
            "Antic+Slab:400,400italic,700,700italic:latin,greek-ext,cyrillic,latin-ext,greek,cyrillic-ext,vietnamese"
          ]
        },
        custom: {
           families: ['FontAwesome'],
           urls: ['font-awesome-4.0.3/css/font-awesome.css']
        }
      };
      (function() {
      var wf = document.createElement('script');
      wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
        '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
	wf.type = 'text/javascript';
	wf.async = 'true';
	var s = document.getElementsByTagName('script')[0];
	s.parentNode.insertBefore(wf, s);
	})();
    </script></head><body xmlns:d="http://docbook.org/ns/docbook" bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div id="wrapper"><div class="header-wrapper"><div class="header-v1"><header id="header"><div class="avada-row" style="margin-top:0px;margin-bottom:0px;"><div class="logo" style="margin-right:0px;margin-top:31px;margin-left:0px;margin-bottom:31px;"><a href="http://janusgraph.org"><img src="avada-stub/images/janusgraph-logo.png" alt="JanusGraph" class="normal_logo"></a></div><nav id="nav" class="nav-holder"><ul class="navigation menu fusion-navbar-nav"><li id="menu-item-4711" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-4711"><a href="index.html">Documentation (0.1.0-SNAPSHOT)</a></li><li id="menu-item-4712" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-4712"><a href="https://github.com/JanusGraph/janusgraph/releases">Other Versions</a></li><li id="menu-item-4710" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-4710"><a href="https://github.com/JanusGraph/janusgraph/releases">Download JanusGraph</a></li></ul></nav><div class="mobile-nav-holder main-menu"></div></div></header></div><div class="init-sticky-header"></div></div><header id="header-sticky" class="sticky-header"><div class="sticky-shadow"><div class="avada-row"><div class="logo"><a href="http://janusgraph.org"><img src="avada-stub/images/janusgraph-logo.png" alt="JanusGraph" data-max-width="" class="normal_logo"></a></div><nav id="sticky-nav" class="nav-holder"><ul class="navigation menu fusion-navbar-nav"><li id="menu-item-4711" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-4711"><a href="index.html">Documentation (0.1.0-SNAPSHOT)</a></li><li id="menu-item-4712" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-4712"><a href="https://github.com/JanusGraph/janusgraph/releases">Other Versions</a></li><li id="menu-item-4710" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-4710"><a href="https://github.com/JanusGraph/janusgraph/releases">Download JanusGraph</a></li></ul></nav><div class="mobile-nav-holder"></div></div></div></header><div id="main" class="clearfix width-100"><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">JanusGraph Documentation</a></span> &gt; <span class="breadcrumb-link"><a href="advanced.html">Advanced Topics</a></span> &gt; <span class="breadcrumb-node">JanusGraph with TinkerPop&#8217;s Hadoop-Gremlin</span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="hadoop-tp3"></a>Chapter&nbsp;32.&nbsp;JanusGraph with TinkerPop&#8217;s Hadoop-Gremlin</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="hadoop-tp3.html#_defining_defining_schema_and_loading_data">32.1. Defining defining schema and loading data</a></span></dt><dt><span class="section"><a href="hadoop-tp3.html#_running_pagerank">32.2. Running PageRank</a></span></dt></dl></div><p>JanusGraph-Hadoop works with TinkerPop 3&#8217;s new hadoop-gremlin package for
general-purpose OLAP.</p><p>Here&#8217;s a three step example showing some basic integrated JanusGraph-TinkerPop functionality.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">Manually define schema and then load the Grateful Dead graph from a TP3 Kryo-serialized binary file</li><li class="listitem">Run a VertexProgram to compute PageRanks, writing the derived graph to <code class="literal">output/~g</code></li><li class="listitem">Read the derived graph vertices and their computed rank values</li></ol></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="images/icons/warning.png"></td><th align="left">Warning</th></tr><tr><td align="left" valign="top"><p>JanusGraph&#8217;s integration with TinkerPop 3.0.0 is still under active development.  The APIs and configuration snippets shown below may change as JanusGraph and TinkerPop 3.0.0 move through milestone releases and eventually their respective final releases.  The content of this chapter should be considered a tech preview rather than stable reference.</p></td></tr></table></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_defining_defining_schema_and_loading_data"></a>32.1.&nbsp;Defining defining schema and loading data</h2></div></div></div><pre class="programlisting">bin/gremlin.sh<span class="hl-gremlin-func">
</span><span class="hl-gremlin-func">
</span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span>\,,,/<span class="hl-gremlin-func">
</span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func">(</span>o<span class="hl-gremlin-func"> </span>o<span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span>-----oOOo-<span class="hl-gremlin-func">(</span><span class="hl-number">3</span><span class="hl-gremlin-func">)</span>-oOOo-----<span class="hl-gremlin-func">
</span>plug<span class="hl-gremlin-func">in </span>activated:<span class="hl-gremlin-func"> </span>tinkerpop.server<span class="hl-gremlin-func">
</span>plug<span class="hl-gremlin-func">in </span>activated:<span class="hl-gremlin-func"> </span>tinkerpop.utilities<span class="hl-gremlin-func">
</span>plug<span class="hl-gremlin-func">in </span>activated:<span class="hl-gremlin-func"> </span>tinkerpop.tinkergraph<span class="hl-gremlin-func">
</span>INFO<span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span>com.tinkerpop.gremlin.hadoop.structure.HadoopGraph<span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span>-<span class="hl-gremlin-func"> </span>HADOOP_GREMLIN_LIBS<span class="hl-gremlin-func"> </span>is<span class="hl-gremlin-func"> </span>set<span class="hl-gremlin-func"> </span>to:<span class="hl-gremlin-func"> </span>/usr/local/janusgraph/lib<span class="hl-gremlin-func">
</span>plug<span class="hl-gremlin-func">in </span>activated:<span class="hl-gremlin-func"> </span>tinkerpop.hadoop<span class="hl-gremlin-func">
</span>plug<span class="hl-gremlin-func">in </span>activated:<span class="hl-gremlin-func"> </span>janusgraph.imports<span class="hl-gremlin-func">
</span><span class="hl-repl-prompt">gremlin&gt;</span><span class="hl-gremlin-func"> </span>:load<span class="hl-gremlin-func"> </span>data/grateful-dead-janusgraph-schema.groovy<span class="hl-gremlin-func">
</span><span class="hl-repl-result">==&gt;</span>true<span class="hl-gremlin-func">
</span><span class="hl-repl-result">==&gt;</span>true<span class="hl-gremlin-func">
</span><span class="hl-repl-prompt">gremlin&gt;</span><span class="hl-gremlin-func"> </span>graph<span class="hl-gremlin-func"> </span>=<span class="hl-gremlin-func"> </span>JanusGraphFactory.open<span class="hl-gremlin-func">(</span><span class="hl-string">'conf/janusgraph-cassandra.properties'</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-repl-result">==&gt;</span>standardjanusgraph[cassandrathrift:[<span class="hl-number">127.0</span>.<span class="hl-number">0.1</span>]]<span class="hl-gremlin-func">
</span><span class="hl-repl-prompt">gremlin&gt;</span><span class="hl-gremlin-func"> </span>defineGratefulDeadSchema<span class="hl-gremlin-func">(</span>graph<span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-repl-result">==&gt;</span>null<span class="hl-gremlin-func">
</span><span class="hl-repl-prompt">gremlin&gt;</span><span class="hl-gremlin-func"> </span>graph.close<span class="hl-gremlin-func">(</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-repl-result">==&gt;</span>null<span class="hl-gremlin-func">
</span><span class="hl-repl-prompt">gremlin&gt;</span><span class="hl-gremlin-func"> </span>hdfs.copyFromLocal<span class="hl-gremlin-func">(</span><span class="hl-string">'data/grateful-dead.kryo'</span>,<span class="hl-string">'data/grateful-dead.kryo'</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-repl-result">==&gt;</span>null<span class="hl-gremlin-func">
</span><span class="hl-repl-prompt">gremlin&gt;</span><span class="hl-gremlin-func"> </span>graph<span class="hl-gremlin-func"> </span>=<span class="hl-gremlin-func"> </span>GraphFactory.open<span class="hl-gremlin-func">(</span><span class="hl-string">'conf/hadoop-graph/hadoop-load.properties'</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-repl-result">==&gt;</span>hadoopgraph[gryoinputformat-&gt;nulloutputformat]<span class="hl-gremlin-func">
</span><span class="hl-repl-prompt">gremlin&gt;</span><span class="hl-gremlin-func"> </span>blvp<span class="hl-gremlin-func"> </span>=<span class="hl-gremlin-func"> </span>BulkLoaderVertexProgram.build<span class="hl-gremlin-func">(</span><span class="hl-gremlin-func">)</span>.writeGraph<span class="hl-gremlin-func">(</span><span class="hl-string">'conf/janusgraph-cassandra.properties'</span><span class="hl-gremlin-func">)</span>.create<span class="hl-gremlin-func">(</span>graph<span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-repl-result">==&gt;</span>BulkLoaderVertexProgram[bulkLoader=IncrementalBulkLoader,vertexIdProperty=bulkLoader.vertex.id,userSuppliedIds=false,keepOriginalIds=true,batchSize=<span class="hl-number">0</span>]<span class="hl-gremlin-func">
</span><span class="hl-repl-prompt">gremlin&gt;</span><span class="hl-gremlin-func"> </span>graph.compute<span class="hl-gremlin-func">(</span>SparkGraphComputer<span class="hl-gremlin-func">)</span>.program<span class="hl-gremlin-func">(</span>blvp<span class="hl-gremlin-func">)</span>.submit<span class="hl-gremlin-func">(</span><span class="hl-gremlin-func">)</span>.get<span class="hl-gremlin-func">(</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span>...<span class="hl-gremlin-func">
</span><span class="hl-repl-result">==&gt;</span>result[hadoopgraph[gryoinputformat-&gt;nulloutputformat],memory[size:<span class="hl-number">0</span>]]<span class="hl-gremlin-func">
</span><span class="hl-repl-prompt">gremlin&gt;</span></pre><pre class="programlisting"><em class="hl-comment"># hadoop-load.properties</em>

<em class="hl-comment">#</em>
<em class="hl-comment"># Hadoop Graph Configuration</em>
<em class="hl-comment">#</em>
<span class="hl-attribute">gremlin.graph</span>=org.apache.tinkerpop.gremlin.hadoop.structure.HadoopGraph
<span class="hl-attribute">gremlin.hadoop.graphInputFormat</span>=org.apache.tinkerpop.gremlin.hadoop.structure.io.gryo.GryoInputFormat
<span class="hl-attribute">gremlin.hadoop.graphOutputFormat</span>=org.apache.hadoop.mapreduce.lib.output.NullOutputFormat
<span class="hl-attribute">gremlin.hadoop.inputLocation</span>=./data/grateful-dead.kryo
<span class="hl-attribute">gremlin.hadoop.outputLocation</span>=output
<span class="hl-attribute">gremlin.hadoop.jarsInDistributedCache</span>=true

<em class="hl-comment">#</em>
<em class="hl-comment"># GiraphGraphComputer Configuration</em>
<em class="hl-comment">#</em>
<span class="hl-attribute">giraph.minWorkers</span>=2
<span class="hl-attribute">giraph.maxWorkers</span>=2
<span class="hl-attribute">giraph.useOutOfCoreGraph</span>=true
<span class="hl-attribute">giraph.useOutOfCoreMessages</span>=true
<span class="hl-attribute">mapred.map.child.java.opts</span>=-Xmx1024m
<span class="hl-attribute">mapred.reduce.child.java.opts</span>=-Xmx1024m
<span class="hl-attribute">giraph.numInputThreads</span>=4
<span class="hl-attribute">giraph.numComputeThreads</span>=4
<span class="hl-attribute">giraph.maxMessagesInMemory</span>=100000

<em class="hl-comment">#</em>
<em class="hl-comment"># SparkGraphComputer Configuration</em>
<em class="hl-comment">#</em>
<span class="hl-attribute">spark.master</span>=local[*]
<span class="hl-attribute">spark.executor.memory</span>=1g
<span class="hl-attribute">spark.serializer</span>=org.apache.spark.serializer.KryoSerializer</pre><pre class="programlisting"><em class="hl-comment">// janusgraph-schema-grateful-dead.groovy</em><span class="hl-gremlin-func">
</span><span class="hl-gremlin-func">
</span>def<span class="hl-gremlin-func"> </span>defineGratefulDeadSchema<span class="hl-gremlin-func">(</span>janusGraph<span class="hl-gremlin-func">)</span><span class="hl-gremlin-func"> </span>{<span class="hl-gremlin-func">
</span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span>m<span class="hl-gremlin-func"> </span>=<span class="hl-gremlin-func"> </span>janusGraph.openManagement<span class="hl-gremlin-func">(</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><em class="hl-comment">// vertex labels</em><span class="hl-gremlin-func">
</span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span>artist<span class="hl-gremlin-func"> </span>=<span class="hl-gremlin-func"> </span>m.makeVertexLabel<span class="hl-gremlin-func">(</span><span class="hl-string">"artist"</span><span class="hl-gremlin-func">)</span>.make<span class="hl-gremlin-func">(</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span>song<span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span>=<span class="hl-gremlin-func"> </span>m.makeVertexLabel<span class="hl-gremlin-func">(</span><span class="hl-string">"song"</span><span class="hl-gremlin-func">)</span>.make<span class="hl-gremlin-func">(</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><em class="hl-comment">// edge labels</em><span class="hl-gremlin-func">
</span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span>sungBy<span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span>=<span class="hl-gremlin-func"> </span>m.makeEdgeLabel<span class="hl-gremlin-func">(</span><span class="hl-string">"sungBy"</span><span class="hl-gremlin-func">)</span>.make<span class="hl-gremlin-func">(</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span>writtenBy<span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span>=<span class="hl-gremlin-func"> </span>m.makeEdgeLabel<span class="hl-gremlin-func">(</span><span class="hl-string">"writtenBy"</span><span class="hl-gremlin-func">)</span>.make<span class="hl-gremlin-func">(</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span>followedBy<span class="hl-gremlin-func"> </span>=<span class="hl-gremlin-func"> </span>m.makeEdgeLabel<span class="hl-gremlin-func">(</span><span class="hl-string">"followedBy"</span><span class="hl-gremlin-func">)</span>.make<span class="hl-gremlin-func">(</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><em class="hl-comment">// vertex and edge properties</em><span class="hl-gremlin-func">
</span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span>bl<span class="hl-gremlin-func">id </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span>=<span class="hl-gremlin-func"> </span>m.makePropertyKey<span class="hl-gremlin-func">(</span><span class="hl-string">"bulkLoader.vertex.id"</span><span class="hl-gremlin-func">)</span>.dataType<span class="hl-gremlin-func">(</span>Long.class<span class="hl-gremlin-func">)</span>.make<span class="hl-gremlin-func">(</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span>name<span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span>=<span class="hl-gremlin-func"> </span>m.makePropertyKey<span class="hl-gremlin-func">(</span><span class="hl-string">"name"</span><span class="hl-gremlin-func">)</span>.dataType<span class="hl-gremlin-func">(</span>String.class<span class="hl-gremlin-func">)</span>.make<span class="hl-gremlin-func">(</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span>songType<span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span>=<span class="hl-gremlin-func"> </span>m.makePropertyKey<span class="hl-gremlin-func">(</span><span class="hl-string">"songType"</span><span class="hl-gremlin-func">)</span>.dataType<span class="hl-gremlin-func">(</span>String.class<span class="hl-gremlin-func">)</span>.make<span class="hl-gremlin-func">(</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span>performances<span class="hl-gremlin-func"> </span>=<span class="hl-gremlin-func"> </span>m.makePropertyKey<span class="hl-gremlin-func">(</span><span class="hl-string">"performances"</span><span class="hl-gremlin-func">)</span>.dataType<span class="hl-gremlin-func">(</span>Integer.class<span class="hl-gremlin-func">)</span>.make<span class="hl-gremlin-func">(</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span>weight<span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span>=<span class="hl-gremlin-func"> </span>m.makePropertyKey<span class="hl-gremlin-func">(</span><span class="hl-string">"weight"</span><span class="hl-gremlin-func">)</span>.dataType<span class="hl-gremlin-func">(</span>Integer.class<span class="hl-gremlin-func">)</span>.make<span class="hl-gremlin-func">(</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><em class="hl-comment">// global indices</em><span class="hl-gremlin-func">
</span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span>m.buildIndex<span class="hl-gremlin-func">(</span><span class="hl-string">"byBulkLoaderVertexId"</span>,<span class="hl-gremlin-func"> </span>Vertex.class<span class="hl-gremlin-func">)</span>.addKey<span class="hl-gremlin-func">(</span>blid<span class="hl-gremlin-func">)</span>.buildCompositeIndex<span class="hl-gremlin-func">(</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span>m.buildIndex<span class="hl-gremlin-func">(</span><span class="hl-string">"artistsByName"</span>,<span class="hl-gremlin-func"> </span>Vertex.class<span class="hl-gremlin-func">)</span>.addKey<span class="hl-gremlin-func">(</span>name<span class="hl-gremlin-func">)</span>.indexOnly<span class="hl-gremlin-func">(</span>artist<span class="hl-gremlin-func">)</span>.buildCompositeIndex<span class="hl-gremlin-func">(</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span>m.buildIndex<span class="hl-gremlin-func">(</span><span class="hl-string">"songsByName"</span>,<span class="hl-gremlin-func"> </span>Vertex.class<span class="hl-gremlin-func">)</span>.addKey<span class="hl-gremlin-func">(</span>name<span class="hl-gremlin-func">)</span>.indexOnly<span class="hl-gremlin-func">(</span>song<span class="hl-gremlin-func">)</span>.buildCompositeIndex<span class="hl-gremlin-func">(</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><em class="hl-comment">// vertex centric indices</em><span class="hl-gremlin-func">
</span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span>m.buildEdgeIndex<span class="hl-gremlin-func">(</span>followedBy,<span class="hl-gremlin-func"> </span><span class="hl-string">"followedByWeight"</span>,<span class="hl-gremlin-func"> </span>Direction.BOTH,<span class="hl-gremlin-func"> </span>Order.decr,<span class="hl-gremlin-func"> </span>weight<span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span><span class="hl-gremlin-func"> </span>m.commit<span class="hl-gremlin-func">(</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span>}</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_running_pagerank"></a>32.2.&nbsp;Running PageRank</h2></div></div></div><p>A fully functional example of the <a class="link" href="http://tinkerpop.apache.org/docs/3.1.1-incubating/reference#pagerankvertexprogram" target="_top">PageRankVertexProgram</a> can be found in the <a class="link" href="http://tinkerpop.apache.org/docs/3.1.1-incubating/reference#vertexprogram" target="_top">VertexProgram</a> section of the TinkerPop3 docs.</p></div></div></div><div class="clearer"></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="serializer.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="advanced.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="internals.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;31.&nbsp;Datatype and Attribute Serializer Configuration&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Part&nbsp;VI.&nbsp;JanusGraph Internals</td></tr></table></div><footer id="footer"><div class="avada-row"><ul class="copyright"><li>
              Copyright &copy; 2017 JanusGraph Authors. All rights reserved.<br>
              The Linux Foundation has registered trademarks and uses trademarks. For a list of<br>
              trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage">Trademark Usage</a> page.<br>
              Cassandra, HBase, and Hadoop are trademarks of the Apache Software Foundation.<br>
              Berkeley DB and Berkeley DB Java Edition are trademarks of Oracle.<br>
              Documentation generated with <a href="http://www.methods.co.nz/asciidoc/">AsciiDoc</a>, <a href="http://asciidoctor.org/">AsciiDoctor</a>, <a href="http://docbook.sourceforge.net/">DocBook</a>, and <a href="http://saxon.sourceforge.net/">Saxon</a>.
              </li></ul></div></footer></div><script type="text/javascript" src="avada-stub/js/main.js"></script></body></html>