<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;6.&nbsp;Gremlin Query Language</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="JanusGraph Documentation"><link rel="up" href="basics.html" title="Part&nbsp;II.&nbsp;JanusGraph Basics"><link rel="prev" href="schema.html" title="Chapter&nbsp;5.&nbsp;Schema and Data Modeling"><link rel="next" href="server.html" title="Chapter&nbsp;7.&nbsp;JanusGraph Server"><script xmlns:d="http://docbook.org/ns/docbook" type="text/javascript" src="js/jquery/jquery-1.11.0.js"></script><script xmlns:d="http://docbook.org/ns/docbook" type="text/javascript" src="js/jquery/jquery-migrate-1.2.1.min.js"></script><link xmlns:d="http://docbook.org/ns/docbook" rel="stylesheet" id="inline-blob-janusgraph-docs-specific" href="css/docs.css" type="text/css" media="all"><link xmlns:d="http://docbook.org/ns/docbook" rel="apple-touch-icon" type="image/png" href="images/janusgraph-logomark.png"><script xmlns:d="http://docbook.org/ns/docbook" type="text/javascript">
      WebFontConfig = {
        google: {
          families: [
            "Lato:400,400italic,700,700italic:latin,greek-ext,cyrillic,latin-ext,greek,cyrillic-ext,vietnamese",
            "Open+Sans:400,400italic,700,700italic:latin,greek-ext,cyrillic,latin-ext,greek,cyrillic-ext,vietnamese",
            "Antic+Slab:400,400italic,700,700italic:latin,greek-ext,cyrillic,latin-ext,greek,cyrillic-ext,vietnamese"
          ]
        }
      };
      (function() {
      var wf = document.createElement('script');
      wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
        '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
	wf.type = 'text/javascript';
	wf.async = 'true';
	var s = document.getElementsByTagName('script')[0];
	s.parentNode.insertBefore(wf, s);
	})();
    </script></head><body xmlns:d="http://docbook.org/ns/docbook" bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div id="wrapper"><div class="header-wrapper"><header id="header"><ul class="header-list"><li class="header-item"><a href="http://janusgraph.org"><img src="images/janusgraph-logo.png" alt="JanusGraph" class="normal_logo"></a></li><li class="header-item-right"><a href="https://github.com/JanusGraph/janusgraph/releases">Download JanusGraph</a></li><li class="header-item-right dropdown"><a href="https://docs.janusgraph.org/latest/doc-versions.html">Other Doc Versions</a><div class="dropdown-content"><a href="https://docs.janusgraph.org/latest/index.html">Latest</a><a href="https://docs.janusgraph.org/0.3.0/index.html">Version 0.3.0</a><a href="https://docs.janusgraph.org/0.2.3/index.html">Version 0.2.3</a><a href="https://docs.janusgraph.org/0.2.2/index.html">Version 0.2.2</a><a href="https://docs.janusgraph.org/0.2.1/index.html">Version 0.2.1</a><a href="https://docs.janusgraph.org/0.2.0/index.html">Version 0.2.0</a><a href="https://docs.janusgraph.org/0.1.1/index.html">Version 0.1.1</a><a href="https://docs.janusgraph.org/0.1.0/index.html">Version 0.1.0</a></div></li><li class="header-item-right"><a href="index.html">Documentation (0.2.3)</a></li></ul></header></div><div id="main" class="clearfix width-100"><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">JanusGraph Documentation</a></span> &gt; <span class="breadcrumb-link"><a href="basics.html">JanusGraph Basics</a></span> &gt; <span class="breadcrumb-node">Gremlin Query Language</span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="gremlin"></a>Chapter&nbsp;6.&nbsp;Gremlin Query Language</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="gremlin.html#_introductory_traversals">6.1. Introductory Traversals</a></span></dt><dt><span class="section"><a href="gremlin.html#_iterating_the_traversal">6.2. Iterating the Traversal</a></span></dt></dl></div><p><span class="inlinemediaobject"><img src="http://tinkerpop.apache.org/docs/3.2.9/images/gremlin-logo.png" height="143" alt="gremlin-logo"></span></p><p><a class="link" href="http://tinkerpop.apache.org/gremlin.html" target="_top">Gremlin</a> is JanusGraph&#8217;s query language used to retrieve data from and modify data in the graph. Gremlin is a path-oriented language which succinctly expresses complex graph traversals and mutation operations. Gremlin is a <a class="link" href="http://en.wikipedia.org/wiki/Functional_programming" target="_top">functional language</a> whereby traversal operators are chained together to form path-like expressions. For example, "from Hercules, traverse to his father and then his father&#8217;s father and return the grandfather&#8217;s name."</p><p>Gremlin is a component of <a class="link" href="http://tinkerpop.apache.org" target="_top">Apache TinkerPop</a>. It is developed independently from JanusGraph and is supported by most graph databases. By building applications on top of JanusGraph through the Gremlin query language, users avoid vendor-lock in because their application can be migrated to other graph databases supporting Gremlin.</p><p>This section is a brief overview of the Gremlin query language. For more information on Gremlin, refer to the following resources:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="http://tinkerpop.apache.org/docs/3.2.9/reference" target="_top">Complete Gremlin Manual</a>: Reference manual for all of the Gremlin steps.</li><li class="listitem"><a class="link" href="http://tinkerpop.apache.org/docs/3.2.9/tutorials/the-gremlin-console/" target="_top">Gremlin Console Tutorial</a>: Learn how to use the Gremlin Console effectively to traverse and analyze a graph interactively.</li><li class="listitem"><a class="link" href="http://tinkerpop.apache.org/docs/3.2.9/recipes/" target="_top">Gremlin Recipes</a>: A collection of best practices and common traversal patterns for Gremlin.</li><li class="listitem"><a class="link" href="http://tinkerpop.apache.org/index.html#language-drivers" target="_top">Gremlin Language Drivers</a>: Connect to a Gremlin Server with different programming languages, including Go, JavaScript, .NET/C#, PHP, Python, Ruby, Scala, and TypeScript.</li><li class="listitem"><a class="link" href="http://sql2gremlin.com" target="_top">Gremlin for SQL developers</a>: Learn Gremlin using typical patterns found when querying data with SQL.</li></ul></div><p>In addition to these resources, <a class="xref" href="connecting.html" title="Part&nbsp;III.&nbsp;Connecting to JanusGraph">Part&nbsp;III, &#8220;Connecting to JanusGraph&#8221;</a> explains how Gremlin can be used in different programming languages to query a JanusGraph Server.</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_introductory_traversals"></a>6.1.&nbsp;Introductory Traversals</h2></div></div></div><p>A Gremlin query is a chain of operations/functions that are evaluated from left to right. A simple grandfather query is provided below over the <span class="emphasis"><em>Graph of the Gods</em></span> dataset discussed in <a class="xref" href="getting-started.html" title="Chapter&nbsp;3.&nbsp;Getting Started">Chapter&nbsp;3, <i>Getting Started</i></a>.</p><pre class="programlisting"><span class="hl-repl-prompt">gremlin&gt;</span><span class="hl-gremlin-func"> </span>g.<span class="hl-gremlin-func">V(</span><span class="hl-gremlin-func">)</span>.<span class="hl-gremlin-func">has(</span><span class="hl-string">'name'</span>,<span class="hl-gremlin-func"> </span><span class="hl-string">'hercules'</span><span class="hl-gremlin-func">)</span>.<span class="hl-gremlin-func">out(</span><span class="hl-string">'father'</span><span class="hl-gremlin-func">)</span>.<span class="hl-gremlin-func">out(</span><span class="hl-string">'father'</span><span class="hl-gremlin-func">)</span>.values<span class="hl-gremlin-func">(</span><span class="hl-string">'name'</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-repl-result">==&gt;</span>saturn</pre><p>The query above can be read:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><code class="literal">g</code>: for the current graph traversal.</li><li class="listitem"><code class="literal">V</code>: for all vertices in the graph</li><li class="listitem"><code class="literal">has('name', 'hercules')</code>: filters the vertices down to those with name property "hercules" (there is only one).</li><li class="listitem"><code class="literal">out('father')</code>: traverse outgoing father edge&#8217;s from Hercules.</li><li class="listitem"><code class="literal">out('father')</code>: traverse outgoing father edge&#8217;s from Hercules' father&#8217;s vertex (i.e. Jupiter).</li><li class="listitem"><code class="literal">name</code>: get the name property of the "hercules" vertex&#8217;s grandfather.</li></ol></div><p>Taken together, these steps form a path-like traversal query. Each step can be decomposed and its results demonstrated. This style of building up a traversal/query is useful when constructing larger, complex query chains.</p><pre class="programlisting"><span class="hl-repl-prompt">gremlin&gt;</span><span class="hl-gremlin-func"> </span>g<span class="hl-gremlin-func">
</span><span class="hl-repl-result">==&gt;</span>graphtraversalsource[janusgraph[cql:<span class="hl-number">127.0</span>.<span class="hl-number">0.1</span>],<span class="hl-gremlin-func"> </span>standard]<span class="hl-gremlin-func">
</span><span class="hl-repl-prompt">gremlin&gt;</span><span class="hl-gremlin-func"> </span>g.<span class="hl-gremlin-func">V(</span><span class="hl-gremlin-func">)</span>.<span class="hl-gremlin-func">has(</span><span class="hl-string">'name'</span>,<span class="hl-gremlin-func"> </span><span class="hl-string">'hercules'</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-repl-result">==&gt;</span>v[<span class="hl-number">24</span>]<span class="hl-gremlin-func">
</span><span class="hl-repl-prompt">gremlin&gt;</span><span class="hl-gremlin-func"> </span>g.<span class="hl-gremlin-func">V(</span><span class="hl-gremlin-func">)</span>.<span class="hl-gremlin-func">has(</span><span class="hl-string">'name'</span>,<span class="hl-gremlin-func"> </span><span class="hl-string">'hercules'</span><span class="hl-gremlin-func">)</span>.<span class="hl-gremlin-func">out(</span><span class="hl-string">'father'</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-repl-result">==&gt;</span>v[<span class="hl-number">16</span>]<span class="hl-gremlin-func">
</span><span class="hl-repl-prompt">gremlin&gt;</span><span class="hl-gremlin-func"> </span>g.<span class="hl-gremlin-func">V(</span><span class="hl-gremlin-func">)</span>.<span class="hl-gremlin-func">has(</span><span class="hl-string">'name'</span>,<span class="hl-gremlin-func"> </span><span class="hl-string">'hercules'</span><span class="hl-gremlin-func">)</span>.<span class="hl-gremlin-func">out(</span><span class="hl-string">'father'</span><span class="hl-gremlin-func">)</span>.<span class="hl-gremlin-func">out(</span><span class="hl-string">'father'</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-repl-result">==&gt;</span>v[<span class="hl-number">20</span>]<span class="hl-gremlin-func">
</span><span class="hl-repl-prompt">gremlin&gt;</span><span class="hl-gremlin-func"> </span>g.<span class="hl-gremlin-func">V(</span><span class="hl-gremlin-func">)</span>.<span class="hl-gremlin-func">has(</span><span class="hl-string">'name'</span>,<span class="hl-gremlin-func"> </span><span class="hl-string">'hercules'</span><span class="hl-gremlin-func">)</span>.<span class="hl-gremlin-func">out(</span><span class="hl-string">'father'</span><span class="hl-gremlin-func">)</span>.<span class="hl-gremlin-func">out(</span><span class="hl-string">'father'</span><span class="hl-gremlin-func">)</span>.values<span class="hl-gremlin-func">(</span><span class="hl-string">'name'</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-repl-result">==&gt;</span>saturn</pre><p>For a sanity check, it is usually good to look at the properties of each return, not the assigned long id.</p><pre class="programlisting"><span class="hl-repl-prompt">gremlin&gt;</span><span class="hl-gremlin-func"> </span>g.<span class="hl-gremlin-func">V(</span><span class="hl-gremlin-func">)</span>.<span class="hl-gremlin-func">has(</span><span class="hl-string">'name'</span>,<span class="hl-gremlin-func"> </span><span class="hl-string">'hercules'</span><span class="hl-gremlin-func">)</span>.values<span class="hl-gremlin-func">(</span><span class="hl-string">'name'</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-repl-result">==&gt;</span>hercules<span class="hl-gremlin-func">
</span><span class="hl-repl-prompt">gremlin&gt;</span><span class="hl-gremlin-func"> </span>g.<span class="hl-gremlin-func">V(</span><span class="hl-gremlin-func">)</span>.<span class="hl-gremlin-func">has(</span><span class="hl-string">'name'</span>,<span class="hl-gremlin-func"> </span><span class="hl-string">'hercules'</span><span class="hl-gremlin-func">)</span>.<span class="hl-gremlin-func">out(</span><span class="hl-string">'father'</span><span class="hl-gremlin-func">)</span>.values<span class="hl-gremlin-func">(</span><span class="hl-string">'name'</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-repl-result">==&gt;</span>jupiter<span class="hl-gremlin-func">
</span><span class="hl-repl-prompt">gremlin&gt;</span><span class="hl-gremlin-func"> </span>g.<span class="hl-gremlin-func">V(</span><span class="hl-gremlin-func">)</span>.<span class="hl-gremlin-func">has(</span><span class="hl-string">'name'</span>,<span class="hl-gremlin-func"> </span><span class="hl-string">'hercules'</span><span class="hl-gremlin-func">)</span>.<span class="hl-gremlin-func">out(</span><span class="hl-string">'father'</span><span class="hl-gremlin-func">)</span>.<span class="hl-gremlin-func">out(</span><span class="hl-string">'father'</span><span class="hl-gremlin-func">)</span>.values<span class="hl-gremlin-func">(</span><span class="hl-string">'name'</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-repl-result">==&gt;</span>saturn</pre><p>Note the related traversal that shows the entire father family tree branch of Hercules. This more complicated traversal is provided in order to demonstrate the flexibility and expressivity of the language. A competent grasp of Gremlin provides the JanusGraph user the ability to fluently navigate the underlying graph structure.</p><pre class="programlisting"><span class="hl-repl-prompt">gremlin&gt;</span><span class="hl-gremlin-func"> </span>g.<span class="hl-gremlin-func">V(</span><span class="hl-gremlin-func">)</span>.<span class="hl-gremlin-func">has(</span><span class="hl-string">'name'</span>,<span class="hl-gremlin-func"> </span><span class="hl-string">'hercules'</span><span class="hl-gremlin-func">)</span>.repeat<span class="hl-gremlin-func">(</span><span class="hl-gremlin-func">out(</span><span class="hl-string">'father'</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">)</span>.emit<span class="hl-gremlin-func">(</span><span class="hl-gremlin-func">)</span>.values<span class="hl-gremlin-func">(</span><span class="hl-string">'name'</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-repl-result">==&gt;</span>jupiter<span class="hl-gremlin-func">
</span><span class="hl-repl-result">==&gt;</span>saturn</pre><p>Some more traversal examples are provided below.</p><pre class="programlisting"><span class="hl-repl-prompt">gremlin&gt;</span><span class="hl-gremlin-func"> </span>hercules<span class="hl-gremlin-func"> </span>=<span class="hl-gremlin-func"> </span>g.<span class="hl-gremlin-func">V(</span><span class="hl-gremlin-func">)</span>.<span class="hl-gremlin-func">has(</span><span class="hl-string">'name'</span>,<span class="hl-gremlin-func"> </span><span class="hl-string">'hercules'</span><span class="hl-gremlin-func">)</span>.<span class="hl-gremlin-func">next(</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-repl-result">==&gt;</span>v[<span class="hl-number">1536</span>]<span class="hl-gremlin-func">
</span><span class="hl-repl-prompt">gremlin&gt;</span><span class="hl-gremlin-func"> </span>g.<span class="hl-gremlin-func">V(</span>hercules<span class="hl-gremlin-func">)</span>.<span class="hl-gremlin-func">out(</span><span class="hl-string">'father'</span>,<span class="hl-gremlin-func"> </span><span class="hl-string">'mother'</span><span class="hl-gremlin-func">)</span>.<span class="hl-gremlin-func">label(</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-repl-result">==&gt;</span>god<span class="hl-gremlin-func">
</span><span class="hl-repl-result">==&gt;</span>human<span class="hl-gremlin-func">
</span><span class="hl-repl-prompt">gremlin&gt;</span><span class="hl-gremlin-func"> </span>g.<span class="hl-gremlin-func">V(</span>hercules<span class="hl-gremlin-func">)</span>.<span class="hl-gremlin-func">out(</span><span class="hl-string">'battled'</span><span class="hl-gremlin-func">)</span>.<span class="hl-gremlin-func">label(</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-repl-result">==&gt;</span>monster<span class="hl-gremlin-func">
</span><span class="hl-repl-result">==&gt;</span>monster<span class="hl-gremlin-func">
</span><span class="hl-repl-result">==&gt;</span>monster<span class="hl-gremlin-func">
</span><span class="hl-repl-prompt">gremlin&gt;</span><span class="hl-gremlin-func"> </span>g.<span class="hl-gremlin-func">V(</span>hercules<span class="hl-gremlin-func">)</span>.<span class="hl-gremlin-func">out(</span><span class="hl-string">'battled'</span><span class="hl-gremlin-func">)</span>.valueMap<span class="hl-gremlin-func">(</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-repl-result">==&gt;</span>{name=nemean}<span class="hl-gremlin-func">
</span><span class="hl-repl-result">==&gt;</span>{name=hydra}<span class="hl-gremlin-func">
</span><span class="hl-repl-result">==&gt;</span>{name=cerberus}</pre><p>Each <span class="emphasis"><em>step</em></span> (denoted by a separating <code class="literal">.</code>) is a function that operates on the objects emitted from the previous step. There are numerous steps in the Gremlin language (see <a class="link" href="http://tinkerpop.apache.org/docs/3.2.9/reference#graph-traversal-steps" target="_top">Gremlin Steps</a>). By simply changing a step or order of the steps, different traversal semantics are enacted. The example below returns the name of all the people that have battled the same monsters as Hercules who themselves are not Hercules (i.e. "co-battlers" or perhaps, "allies").</p><p>Given that <span class="emphasis"><em>The Graph of the Gods</em></span> only has one battler (Hercules), another battler (for the sake of example) is added to the graph with Gremlin showcasing how vertices and edges are added to the graph.</p><pre class="programlisting"><span class="hl-repl-prompt">gremlin&gt;</span><span class="hl-gremlin-func"> </span>theseus<span class="hl-gremlin-func"> </span>=<span class="hl-gremlin-func"> </span>graph.<span class="hl-gremlin-func">addVertex(</span><span class="hl-string">'human'</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-repl-result">==&gt;</span>v[<span class="hl-number">3328</span>]<span class="hl-gremlin-func">
</span><span class="hl-repl-prompt">gremlin&gt;</span><span class="hl-gremlin-func"> </span>theseus.property<span class="hl-gremlin-func">(</span><span class="hl-string">'name'</span>,<span class="hl-gremlin-func"> </span><span class="hl-string">'theseus'</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-repl-result">==&gt;</span>null<span class="hl-gremlin-func">
</span><span class="hl-repl-prompt">gremlin&gt;</span><span class="hl-gremlin-func"> </span>cerberus<span class="hl-gremlin-func"> </span>=<span class="hl-gremlin-func"> </span>g.<span class="hl-gremlin-func">V(</span><span class="hl-gremlin-func">)</span>.<span class="hl-gremlin-func">has(</span><span class="hl-string">'name'</span>,<span class="hl-gremlin-func"> </span><span class="hl-string">'cerberus'</span><span class="hl-gremlin-func">)</span>.<span class="hl-gremlin-func">next(</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-repl-result">==&gt;</span>v[<span class="hl-number">2816</span>]<span class="hl-gremlin-func">
</span><span class="hl-repl-prompt">gremlin&gt;</span><span class="hl-gremlin-func"> </span>battle<span class="hl-gremlin-func"> </span>=<span class="hl-gremlin-func"> </span>theseus.<span class="hl-gremlin-func">addEdge(</span><span class="hl-string">'battled'</span>,<span class="hl-gremlin-func"> </span>cerberus,<span class="hl-gremlin-func"> </span><span class="hl-string">'time'</span>,<span class="hl-gremlin-func"> </span><span class="hl-number">22</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-repl-result">==&gt;</span>e[<span class="hl-number">7e</span>o-<span class="hl-number">2</span>kg-iz9-<span class="hl-number">268</span>][<span class="hl-number">3328</span>-battled-&gt;<span class="hl-number">2816</span>]<span class="hl-gremlin-func">
</span><span class="hl-repl-prompt">gremlin&gt;</span><span class="hl-gremlin-func"> </span>battle.values<span class="hl-gremlin-func">(</span><span class="hl-string">'time'</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-repl-result">==&gt;</span><span class="hl-number">22</span></pre><p>When adding a vertex, an optional vertex label can be provided. An edge label must be specified when adding edges. Properties as key-value pairs can be set on both vertices and edges. When a property key is defined with SET or LIST cardinality, <code class="literal">addProperty</code> must be used when adding a respective property to a vertex.</p><pre class="programlisting"><span class="hl-repl-prompt">gremlin&gt;</span><span class="hl-gremlin-func"> </span>g.<span class="hl-gremlin-func">V(</span>hercules<span class="hl-gremlin-func">)</span>.<span class="hl-gremlin-func">as(</span><span class="hl-string">'h'</span><span class="hl-gremlin-func">)</span>.<span class="hl-gremlin-func">out(</span><span class="hl-string">'battled'</span><span class="hl-gremlin-func">)</span>.<span class="hl-gremlin-func">in(</span><span class="hl-string">'battled'</span><span class="hl-gremlin-func">)</span>.where<span class="hl-gremlin-func">(</span>neq<span class="hl-gremlin-func">(</span><span class="hl-string">'h'</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">)</span>.values<span class="hl-gremlin-func">(</span><span class="hl-string">'name'</span><span class="hl-gremlin-func">)</span><span class="hl-gremlin-func">
</span><span class="hl-repl-result">==&gt;</span>theseus</pre><p>The example above has 4 chained functions: <code class="literal">out</code>, <code class="literal">in</code>, <code class="literal">except</code>, and <code class="literal">values</code> (i.e. <code class="literal">name</code> is shorthand for <code class="literal">values('name')</code>). The function signatures of each are itemized below, where <code class="literal">V</code> is vertex and <code class="literal">U</code> is any object, where <code class="literal">V</code> is a subset of <code class="literal">U</code>.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><code class="literal">out: V -&gt; V</code></li><li class="listitem"><code class="literal">in: V -&gt; V</code></li><li class="listitem"><code class="literal">except: U -&gt; U</code></li><li class="listitem"><code class="literal">values: V -&gt; U</code></li></ol></div><p>When chaining together functions, the incoming type must match the outgoing type, where <code class="literal">U</code> matches anything. Thus, the "co-battled/ally" traversal above is correct.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>The Gremlin overview presented in this section focused on the Gremlin-Groovy language implementation used in the Gremlin Console. Refer to <a class="xref" href="connecting.html" title="Part&nbsp;III.&nbsp;Connecting to JanusGraph">Part&nbsp;III, &#8220;Connecting to JanusGraph&#8221;</a> for information about connecting to JanusGraph with other languages than Groovy and independent of the Gremlin Console.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_iterating_the_traversal"></a>6.2.&nbsp;Iterating the Traversal</h2></div></div></div><p>One convenient feature of the Gremlin Console is that it automatically iterates all results from a query executed from the <code class="literal">gremlin&gt;</code> prompt. This works well within the <a class="link" href="http://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop" target="_top">REPL</a> environment as it shows you the results as a String. As you transition towards writing a Gremlin application, it is important to understand how to iterate a traversal explicitly because your application&#8217;s traversals will not iterate automatically. These are some of the common ways to iterate the <a class="link" href="http://tinkerpop.apache.org/javadocs/3.2.9/full/org/apache/tinkerpop/gremlin/process/traversal/Traversal.html" target="_top"><code class="literal">Traversal</code></a>:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><code class="literal">iterate()</code> - Zero results are expected or can be ignored.</li><li class="listitem"><code class="literal">next()</code> - Get one result. Make sure to check <code class="literal">hasNext()</code> first.</li><li class="listitem"><code class="literal">next(int n)</code> - Get the next <code class="literal">n</code> results. Make sure to check <code class="literal">hasNext()</code> first.</li><li class="listitem"><code class="literal">toList()</code> - Get all results as a list. If there are no results, an empty list is returned.</li></ul></div><p>A Java code example is shown below to demonstrate these concepts:</p><pre class="programlisting">Traversal t = g.V().has(<span class="hl-string">"name"</span>, <span class="hl-string">"pluto"</span>); <em class="hl-comment">// Define a traversal</em>
<em class="hl-comment">// Note the traversal is not executed/iterated yet</em>
Vertex pluto = null;
<strong class="hl-keyword">if</strong> (t.hasNext()) { <em class="hl-comment">// Check if results are available</em>
    pluto = g.V().has(<span class="hl-string">"name"</span>, <span class="hl-string">"pluto"</span>).next(); <em class="hl-comment">// Get one result</em>
    g.V(pluto).drop().iterate(); <em class="hl-comment">// Execute a traversal to drop pluto from graph</em>
}
<em class="hl-comment">// Note the traversal can be cloned for reuse</em>
Traversal tt = t.asAdmin().clone();
<strong class="hl-keyword">if</strong> (tt.hasNext()) {
    System.err.println(<span class="hl-string">"pluto was not dropped!"</span>);
}
List&lt;Vertex&gt; gods = g.V().hasLabel(<span class="hl-string">"god"</span>).toList(); <em class="hl-comment">// Find all the gods</em></pre></div></div></div><div class="clearer"></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="schema.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="basics.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="server.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;5.&nbsp;Schema and Data Modeling&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;7.&nbsp;JanusGraph Server</td></tr></table></div><div class="footer-wrapper"><footer id="footer"><div class="copyright">
              Copyright &copy; 2017 JanusGraph Authors. All rights reserved.<br>
              The Linux Foundation has registered trademarks and uses trademarks. For a list of<br>
              trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage">Trademark Usage</a> page.<br>
              Cassandra, Groovy, HBase, Hadoop, Lucene, Solr, and TinkerPop are trademarks of the Apache Software Foundation.<br>
              Berkeley DB and Berkeley DB Java Edition are trademarks of Oracle.<br>
              Documentation generated with <a href="http://www.methods.co.nz/asciidoc/">AsciiDoc</a>, <a href="http://asciidoctor.org/">AsciiDoctor</a>, <a href="http://docbook.sourceforge.net/">DocBook</a>, and <a href="http://saxon.sourceforge.net/">Saxon</a>.
        	  </div></footer></div></div></body></html>